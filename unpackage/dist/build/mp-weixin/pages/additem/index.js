(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/additem/index"],{"0a38":function(t,e,s){"use strict";var i=s("8664"),n=s.n(i);n.a},"2d45":function(t,e,s){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},a=[];s.d(e,"b",function(){return n}),s.d(e,"c",function(){return a}),s.d(e,"a",function(){return i})},"69f6":function(t,e,s){"use strict";(function(t){s("7d5c"),s("921b");i(s("66fd"));var e=i(s("f264"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},8664:function(t,e,s){},c0b8:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(s("ed70")),n=(s("8e97"),a(s("62d9")));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){return Promise.all([s.e("common/vendor"),s.e("components/w-picker/w-picker")]).then(s.bind(null,"9d84"))},c={data:function(){return{accessToken:"64e9275246c6545a3b5d3ad060fe4c516f44d556",appsercert:"MTExMTEx",imgList:[],title:"",sha:"",idList:[],starttime:"",endtime:"",startYear:"2000",tabIndex:"",pickVal:[],mould_name:"默认模板",moulde_id:1}},components:{wPicker:o},methods:{submit:function(){var e=this;if(this.title){var s=this.idList.join();if(0!=this.idList.length){var n="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&teamname="+this.title+"&team_user="+s;this.sha=(0,i.default)(n),console.log(this.sha),this.$axios({url:this.$baseUrl.addtask.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{"access-token":this.accessToken,sign:this.sha,teamname:this.title,team_user:s,start_date:this.starttime,end_date:this.endtime,template_id:this.moulde_id}).then(function(s){console.log(s),s.data.t_teamName==e.title?(t.showToast({title:"添加成功"}),e.title="",e.imgList=[],setTimeout(function(){t.reLaunch({url:"/pages/item/index"})},1200)):t.showToast({title:"添加失败",icon:"none"})},function(t){console.log(t)})}else{n="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&teamname="+this.title;this.sha=(0,i.default)(n),console.log(this.sha),this.$axios({url:this.$baseUrl.addtask.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{"access-token":this.accessToken,sign:this.sha,teamname:this.title,start_date:this.starttime,end_date:this.endtime,template_id:this.moulde_id}).then(function(s){s.data.t_teamName==e.title?(t.showToast({title:"添加成功"}),e.title="",e.imgList=[],setTimeout(function(){t.reLaunch({url:"/pages/item/index"})},1200)):t.showToast({title:"添加失败",icon:"none"})},function(t){console.log(t)})}}else t.showToast({title:"项目名称不能为空",icon:"none"})},changeEndtime:function(t){this.tabIndex=t,this.$refs.picker.show()},onConfirm3:function(t){console.log(t),this.endtime=t.result},changeStarttime:function(t){this.tabIndex=t,this.$refs.picker2.show()},onConfirm:function(t){console.log(t),this.starttime=t.result},gomouldlist:function(){t.navigateTo({url:"/pages/mouldList/index"})},goAddMember:function(){var e=this;t.request({url:"http://testapi.shiliucrm.com/v1/hwechat_callback/callbacktask/getjsapiticket",data:{url:window.location.href.split("#")[0]},success:function(s){console.log(s),n.default.config({debug:!1,beta:!0,appId:s.data.appid,timestamp:s.data.timestamp,nonceStr:s.data.noncestr,signature:s.data.signature,jsApiList:["selectEnterpriseContact"]}),n.default.ready(function(){var s=n.default.invoke||WeixinJSBridge.invoke;s("selectEnterpriseContact",{fromDepartmentId:1,mode:"multi",type:["user"],selectedDepartmentIds:[],selectedUserIds:[]},function(s){if("selectEnterpriseContact:ok"==s.err_msg){"string"==typeof s.result&&(s.result=JSON.parse(s.result));for(var i=s.result.userList,n=0;n<i.length;n++){var a=function(e){var s=this;t.request({url:"http://testapi.shiliucrm.com/v1/hwechat_callback/callbacktask/getuserid",data:{id:e},success:function(t){s.idList.push(t.data.user_id)}})},o=i[n];e.imgList=e.imgList.concat(o.avatar);var c=o.id;a(c)}}})})}})}},onLoad:function(){var e=t.getStorageSync("login");e&&(this.accessToken=e.access_token,this.appsercert=e.appsercert)},onTabItemTap:function(){console.log("点击了添加项目页面"),t.switchTab({url:"/pages/additem/index"})},onShow:function(){var e=t.getStorageSync("list");e&&(console.log(e),this.moulde_id=e.moulde_id,this.mould_name=e.moulde,t.removeStorageSync("list"));var s=new Date,i=s.getFullYear(),n=s.getMonth()+1,a=s.getDate();console.log(i,n,a),this.pickVal=[i-2e3,n-1,a-1]}};e.default=c}).call(this,s("543d")["default"])},e304:function(t,e,s){"use strict";s.r(e);var i=s("c0b8"),n=s.n(i);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},f264:function(t,e,s){"use strict";s.r(e);var i=s("2d45"),n=s("e304");for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);s("0a38");var o,c=s("f0c5"),r=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=r.exports}},[["69f6","common/runtime","common/vendor"]]]);