(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addfile/index"],{"207e":function(t,e,i){"use strict";var n,s=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"b",function(){return s}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return n})},"61a1":function(t,e,i){"use strict";(function(t){i("7d5c"),i("921b");n(i("66fd"));var e=n(i("c8fd"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"77bc":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("ed70")),s=i("8e97");function o(t){return t&&t.__esModule?t:{default:t}}var a=i("be4a"),l=new a,c={data:function(){return{start_slide_x:0,accessToken:"64e9275246c6545a3b5d3ad060fe4c516f44d556",appsercert:"MTExMTEx",btnWidth:0,id:"",startX:0,LastX:0,startTime:0,screenName:"",list:[],fileList:[],sha:"",uploadlist:[]}},computed:{Screen_width:function(){return t.getSystemInfoSync().windowWidth}},directives:{isIphoneX:{bind:function(t,e){var i="ios",n=!1;"ios"===i&&window.screen.height&&(n=window.screen.height>750),n?t.setAttribute("style"," padding-bottom: 8vh !important;min-height: 8vh !important;"):"height"===e.value&&t.setAttribute("style"," padding-bottom: 11vh !important;min-height: 89vh !important;")},update:function(t,e){}}},methods:{previewImg:function(e){console.log(111),t.previewImage({urls:e,longPressActions:{itemList:["预览","保存图片"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片")},fail:function(t){console.log(t.errMsg)}}})},getdetail:function(){var e=this,i="access-token="+this.accessToken+"&appsercert="+this.appsercert;this.sha=(0,n.default)(i),console.log(this.sha),this.$axios({url:this.$baseUrl.missiondetail.url+this.id+"?access-token="+this.accessToken+"&sign="+this.sha,method:"get"}).then(function(i){t.hideLoading(),console.log(i),e.detail=i.data.task,e.list=e.detail.upload,console.log(e.list);var n=!0,s=!1,o=void 0;try{for(var a,l=e.list[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;console.log(c),e.uploadlist.push(c.path)}}catch(g){s=!0,o=g}finally{try{n||null==l.return||l.return()}finally{if(s)throw o}}for(var r=new Date,u=r.getFullYear(),d=r.getMonth()+1,h=r.getDate(),f=0;f<e.list.length;f++)e.$set(e.list[f],"slide_x",0),e.$set(e.list[f],"nowtime",u+"-"+d+"-"+h)},function(t){console.log(t)})},removeFile:function(e,i){var n=this;this.$axios({url:this.$baseUrl.delFile.url+e,method:"delete"}).then(function(e){console.log(e),"删除成功"==e.data.status&&(n.getdetail(),setTimeout(function(){t.showToast({title:e.data.status,icon:"none"})},500))},function(t){console.log(t)})},touchStart:function(e,i){var n=this;this.startTime=e.timeStamp,this.start_slide_x=this.list[i].slide_x,t.createSelectorQuery().selectAll(".group-btn").boundingClientRect().exec(function(t){null!=t[0]&&(n.btnWidth=-1*t[0][i].width)}),this.startX=e.touches[0].pageX,this.lastX=this.startX,this.list.forEach(function(t,e){e!==i&&(t.slide_x=0)})},touchMove:function(t,e){var i=t.touches[0].pageX,n=i-this.lastX,s=this.list[e].slide_x+n;s<=0&&s>=this.btnWidth&&(this.list[e].slide_x=s),this.lastX=i},touchEnd:function(t,e){var i=10,n=t.timeStamp,s=this.startX-this.lastX;Math.abs(n-this.startTime)>200&&(i=this.btnWidth/-2),this.list[e].slide_x=s>i?this.btnWidth:s<-1*i?0:this.start_slide_x},recover:function(e,i){console.log(e),this.list[e].slide_x=0,t.previewImage({current:this.uploadlist[e],urls:this.uploadlist})}},mounted:function(){var e=this,i=document.createElement("input");i.type="file",i.onchange=function(i){t.showLoading({title:"添加中"}),e.list=[],e.filename=i.target.files[0].name;var n=i.target.files[0],s=new FormData;e.fileList.push(n),s.append("t_id",e.id),e.fileList.forEach(function(t,e){s.append(e,t)}),l.post(e.$baseUrl.addFile.url+"?access-token="+e.accessToken,s).then(function(n){console.log(n),n.data.length>0&&(e.getdetail(),e.fileList=[],setTimeout(function(){t.showToast({title:"添加成功",icon:"success"}),t.hideLoading()},500),i.target.value="")})},this.$refs.input.$el.appendChild(i)},onLoad:function(e){this.id=e.id,t.showLoading({title:"加载中"});var i=t.getStorageSync("login");i&&(this.accessToken=i.access_token,this.appsercert=i.appsercert),console.log(e),this.getdetail()},onShow:function(){document.title="handone",(0,s.ChangePageTitle)("handone")}};e.default=c}).call(this,i("543d")["default"])},"9eed":function(t,e,i){"use strict";var n=i("a2a4"),s=i.n(n);s.a},a2a4:function(t,e,i){},c8fd:function(t,e,i){"use strict";i.r(e);var n=i("207e"),s=i("ffcb");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("9eed");var a,l=i("f0c5"),c=Object(l["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},ffcb:function(t,e,i){"use strict";i.r(e);var n=i("77bc"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=s.a}},[["61a1","common/runtime","common/vendor"]]]);