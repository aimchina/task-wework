(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/missiondetail/index"],{"01c6":function(t,e,s){},"398e":function(t,e,s){"use strict";var i=s("01c6"),n=s.n(i);n.a},4659:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(s("ed70")),n=(a(s("8898")),a(s("62d9"))),o=s("8e97");function a(t){return t&&t.__esModule?t:{default:t}}var c=function(){return s.e("components/Ainput/Ainput").then(s.bind(null,"0567"))},l=function(){return Promise.all([s.e("common/vendor"),s.e("components/w-picker/w-picker")]).then(s.bind(null,"9d84"))},r=function(){return s.e("components/loading/loading13").then(s.bind(null,"d61e"))},d=s("be4a"),h=(new d,{data:function(){return{text:"",value:"",comment_con:"",tabIndex:0,active:"关注任务",actfocus:!0,accessToken:"64e9275246c6545a3b5d3ad060fe4c516f44d556",appsercert:"MTExMTEx",id:"",t_nickname:"",endtime:"",detail:[],file:"",price:"",reply:"",memberlist:[],uploadlist:[],imgList:[],startYear:"2000",userInput:"",pickVal:[],replylist:[],visible:!1,start_slide_x:0,isShow_loading:!0,btnWidth:0,startX:0,LastX:0,startTime:0,screenName:"",idList:[9112],list:[],btuBottom:"0",secondHeight:""}},computed:{Screen_width:function(){return t.getSystemInfoSync().windowWidth}},watch:{userInput:function(t){console.log(t),setTimeout(function(){document.body.scrollTop=document.body.scrollHeight},400)}},components:{"v-edit-div":c,wPicker:l,Loading13:r},methods:{touchStart:function(e,s){var i=this,n="list"+s;console.log(n),console.log(this.$refs.list0),this.startTime=e.timeStamp,this.start_slide_x=this.list[s].slide_x,t.createSelectorQuery().selectAll(".group-btn").boundingClientRect().exec(function(t){null!=t[0]&&(i.btnWidth=-1*t[0][s].width)}),this.startX=e.touches[0].pageX,this.lastX=this.startX,this.list.forEach(function(t,e){e!==s&&(t.slide_x=0)})},touchMove:function(t,e){var s=t.touches[0].pageX,i=s-this.lastX,n=this.list[e].slide_x+i;n<=0&&n>=this.btnWidth&&(this.list[e].slide_x=n),this.lastX=s},touchEnd:function(t,e){var s=10,i=t.timeStamp,n=this.startX-this.lastX;Math.abs(i-this.startTime)>200&&(s=this.btnWidth/-2),this.list[e].slide_x=n>s?this.btnWidth:n<-1*s?0:this.start_slide_x},recover:function(t){this.list[t].slide_x=0},removeM:function(e,s){var n=this;console.log("点击删除"),t.showModal({title:"",content:"确定要删除该信息吗？",confirmText:"删除",confirmColor:"#ff3b32",success:function(e){var s=this;if(e.confirm){console.log("用户点击确定");var o="access-token="+n.accessToken+"&appsercert="+n.appsercert+"&id="+n.id;n.sha=(0,i.default)(o),console.log(n.sha),n.$axios({url:"https://testapi.shiliucrm.com/v2/task/replies/"+n.id+"?access-token="+n.accessToken+"&sign="+n.sha,method:"delete"}).then(function(e){console.log(e),e.data.success?(t.showToast({title:"删除成功",icon:"none"}),s.getdetail()):t.showToast({title:e.data.message,icon:"none"})},function(t){console.log(t)})}else e.cancel&&console.log("用户点击取消")}})},iosInputFocus:function(){this.userInput=!0,this.isIOS()&&(console.log(),setTimeout(function(){document.body.scrollTop=document.body.scrollHeight},100))},outInputFocus:function(){this.userInput=!1},isIOS:function(){var t=window.navigator.userAgent.toLowerCase().indexOf("iphone")>-1,e=window.navigator.userAgent.toLowerCase().indexOf("ipad")>-1;return t||e},gocustomList:function(){var e=this;t.request({url:"http://testapi.shiliucrm.com/v1/hwechat_callback/callbacktask/getjsapiticket",data:{url:window.location.href.split("#")[0]},success:function(s){console.log(s),n.default.config({debug:!1,beta:!1,appId:s.data.appid,timestamp:s.data.timestamp,nonceStr:s.data.noncestr,signature:s.data.signature,jsApiList:["selectEnterpriseContact"]}),n.default.ready(function(){var s=n.default.invoke||WeixinJSBridge.invoke;s("selectEnterpriseContact",{fromDepartmentId:-1,mode:"multi",type:["user"],selectedDepartmentIds:[],selectedUserIds:[]},function(s){if("selectEnterpriseContact:ok"==s.err_msg){"string"==typeof s.result&&(s.result=JSON.parse(s.result));for(var i=s.result.userList,n=0;n<i.length;n++){var o=function(s){t.request({url:"http://testapi.shiliucrm.com/v1/hwechat_callback/callbacktask/getuserid",data:{id:s},success:function(t){e.idList.push(t.data.user_id),e.idList&&e.amendmember()}})},a=i[n];e.imgList=e.imgList.concat(a.name);var c=a.id;o(c)}}})})}})},changeEndtime:function(t){this.tabIndex=t,this.$refs.picker.show()},onConfirm3:function(t){console.log(t),this.endtime=t.result,this.endtime&&this.missionedit_time()},interval:function(){this.$refs.ipt;console.log(this.$refs.ipt),setInterval(function(){},1e3)},goaddFile:function(){JSON.stringify(this.uploadlist);t.navigateTo({url:"/pages/addfile/index?id="+this.id})},goaddmoney:function(){t.navigateTo({url:"/pages/addprice/index"})},focus:function(){var e=this;if(console.log(this.actfocus),this.actfocus){this.actfocus=!this.actfocus;var s="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&id="+this.id;this.sha=(0,i.default)(s),console.log(this.sha),t.request({url:"https://testapi.shiliucrm.com/v1/task/task-attentions/"+this.id+"?access-token="+this.accessToken+"&sign="+this.sha,method:"DELETE",header:{"content-type":"application/x-www-form-urlencoded"},success:function(s){console.log(s),"成功"==s.data.msg&&(e.active="关注任务",t.showToast({title:"取消成功",icon:"none"}))}})}else{this.actfocus=!this.actfocus;s="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&task_id="+this.id;this.sha=(0,i.default)(s),console.log(this.sha),this.$axios({url:this.$baseUrl.followmission.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{task_id:this.id}).then(function(s){console.log(s),1==s.data.status&&(e.active="取消关注",t.showToast({title:"关注成功",icon:"none"}))},function(t){console.log(t)})}},delmission:function(){var e=this;t.showModal({title:"提示",content:"是否确认删除？此操作不可恢复",success:function(s){if(s.confirm){var n="access-token="+e.accessToken+"&appsercert="+e.appsercert+"&id="+e.id;e.sha=(0,i.default)(n),console.log(e.sha),e.$axios({url:"https://testapi.shiliucrm.com/v2/task/tasks/"+e.id+"?access-token="+e.accessToken+"&sign="+e.sha,method:"delete"}).then(function(e){console.log(e),e.data.success?t.navigateBack({delta:1}):t.showToast({title:e.data.message,icon:"none"})},function(t){console.log(t)})}}})},complete:function(){var e="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&tid="+this.id;this.sha=(0,i.default)(e),console.log(this.sha),this.$axios({url:this.$baseUrl.complemission.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{tid:this.id}).then(function(e){console.log(e),1==e.data.state?t.navigateBack({delta:1}):t.showToast({title:e.data.msg,icon:"none"})},function(t){console.log(t)})},changeText:function(t){var e=this;console.log(t),this.value=t,this.$nextTick(function(){e.missionedit_content()})},missionedit_content:function(){console.log(11);var t="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&t_id="+this.id+"&t_taskContent="+this.value;this.sha=(0,i.default)(t),console.log(this.sha),this.$axios({url:this.$baseUrl.missionedit.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{t_id:this.id,t_taskContent:this.value}).then(function(t){console.log(t)},function(t){console.log(t)})},missionedit_time:function(){var t="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&t_id="+this.id+"&t_taskEndTime="+this.endtime;this.sha=(0,i.default)(t),console.log(this.sha),this.$axios({url:this.$baseUrl.missionedit.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{t_id:this.id,t_taskEndTime:this.endtime}).then(function(t){console.log(t)},function(t){console.log(t)})},submit:function(){var e=this;this.userInput=!1;var s="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&t_replycontent="+this.comment_con+"&t_teamtaskid="+this.id;this.sha=(0,i.default)(s),console.log(this.sha),this.$axios({url:this.$baseUrl.comment_content.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{t_teamTaskId:this.id,t_replyContent:this.comment_con}).then(function(s){s.data.t_replyContent?(e.getdetail(),e.comment_con=""):t.showToast({title:"回复失败",icon:"none"})},function(t){console.log(t)})},amendmember:function(){var t=this,e=this.idList.join(","),s="access-token="+this.accessToken+"&addmember="+e+"&appsercert="+this.appsercert+"&t_id="+this.id;this.sha=(0,i.default)(s),console.log(this.sha),this.$axios({url:this.$baseUrl.relatedman.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{t_id:this.id,addmember:e}).then(function(e){console.log(e),"修改成功"==e.deta.msg&&(t.idList=[])},function(t){console.log(t)})},getdetail:function(){var e=this,s="access-token="+this.accessToken+"&appsercert="+this.appsercert;this.sha=(0,i.default)(s),console.log(this.sha),this.$axios({url:this.$baseUrl.missiondetail.url+this.id+"?access-token="+this.accessToken+"&sign="+this.sha,method:"get"}).then(function(s){console.log(s),e.isShow_loading=!1,t.hideLoading(),e.detail=s.data.task,e.t_nickname=e.detail.user.t_nickname,e.value=e.detail.t_taskContent,e.endtime=e.detail.t_taskEndTime,e.file=e.detail.upload.length,e.price=e.detail.worth,e.reply=e.detail.reply.length,e.memberlist=e.detail.taskmember,console.log(e.memberlist),e.uploadlist=e.detail.upload,1==e.detail.is_attention?(e.active="取消关注",e.actfocus=!0):(e.active="关注任务",e.actfocus=!1);for(var i=0;i<e.detail.reply.length;i++)e.$set(e.detail.reply[i],"slide_x",0);e.list=e.detail.reply,console.log(e)},function(t){console.log(t)})}},onLoad:function(t){this.id=t.id},onShow:function(){document.title="handone",(0,o.ChangePageTitle)("handone"),this.isShow_loading=!0,t.showLoading({title:"加载中"});var e=t.getStorageSync("login");e&&(this.accessToken=e.access_token,this.appsercert=e.appsercert),this.getdetail();var s=new Date,i=s.getFullYear(),n=s.getMonth()+1,a=s.getDate();console.log(i,n,a),this.pickVal=[i-2e3,n-1,a-1]},mounted:function(){}});e.default=h}).call(this,s("543d")["default"])},"4fd9":function(t,e,s){"use strict";s.r(e);var i=s("4659"),n=s.n(i);for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"682b":function(t,e,s){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},o=[];s.d(e,"b",function(){return n}),s.d(e,"c",function(){return o}),s.d(e,"a",function(){return i})},a5b2:function(t,e,s){"use strict";s.r(e);var i=s("682b"),n=s("4fd9");for(var o in n)"default"!==o&&function(t){s.d(e,t,function(){return n[t]})}(o);s("398e");var a,c=s("f0c5"),l=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=l.exports},dc39:function(t,e,s){"use strict";(function(t){s("7d5c"),s("921b");i(s("66fd"));var e=i(s("a5b2"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])}},[["dc39","common/runtime","common/vendor"]]]);