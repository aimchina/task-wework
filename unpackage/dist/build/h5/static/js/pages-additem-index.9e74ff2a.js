(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-additem-index"],{"1aee":function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("28a5");var n=i(a("98d4")),s=i(a("d49b")),o=a("8852"),d=i(a("645f")),r={data:function(){return{accessToken:"64e9275246c6545a3b5d3ad060fe4c516f44d556",appsercert:"MTExMTEx",imgList:[],title:"",sha:"",idList:[],starttime:"",endtime:"",startYear:"2000",tabIndex:"",pickVal:[],mould_name:"默认模板",moulde_id:1}},components:{wPicker:s.default},methods:{submit:function(){var t=this;if(this.title){var e=this.idList.join();if(0!=this.idList.length){var a="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&teamname="+this.title+"&team_user="+e;this.sha=(0,n.default)(a),console.log(this.sha),this.$axios({url:this.$baseUrl.addtask.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{"access-token":this.accessToken,sign:this.sha,teamname:this.title,team_user:e,start_date:this.starttime,end_date:this.endtime,template_id:this.moulde_id}).then(function(e){console.log(e),e.data.t_teamName==t.title?(uni.showToast({title:"添加成功"}),t.title="",t.imgList=[],setTimeout(function(){uni.reLaunch({url:"/pages/item/index"})},1200)):uni.showToast({title:"添加失败",icon:"none"})},function(t){console.log(t)})}else{a="access-token="+this.accessToken+"&appsercert="+this.appsercert+"&teamname="+this.title;this.sha=(0,n.default)(a),console.log(this.sha),this.$axios({url:this.$baseUrl.addtask.url+"?access-token="+this.accessToken+"&sign="+this.sha,method:"post"},{"access-token":this.accessToken,sign:this.sha,teamname:this.title,start_date:this.starttime,end_date:this.endtime,template_id:this.moulde_id}).then(function(e){e.data.t_teamName==t.title?(uni.showToast({title:"添加成功"}),t.title="",t.imgList=[],setTimeout(function(){uni.reLaunch({url:"/pages/item/index"})},1200)):uni.showToast({title:"添加失败",icon:"none"})},function(t){console.log(t)})}}else uni.showToast({title:"项目名称不能为空",icon:"none"})},changeEndtime:function(t){this.tabIndex=t,this.$refs.picker.show()},onConfirm3:function(t){console.log(t),this.endtime=t.result},changeStarttime:function(t){this.tabIndex=t,this.$refs.picker2.show()},onConfirm:function(t){console.log(t),this.starttime=t.result},gomouldlist:function(){uni.navigateTo({url:"/pages/mouldList/index"})},goAddMember:function(){var t=this;uni.request({url:"http://testapi.shiliucrm.com/v1/hwechat_callback/callbacktask/getjsapiticket",data:{url:window.location.href.split("#")[0]},success:function(e){console.log(e),d.default.config({debug:!1,beta:!0,appId:e.data.appid,timestamp:e.data.timestamp,nonceStr:e.data.noncestr,signature:e.data.signature,jsApiList:["selectEnterpriseContact"]}),d.default.ready(function(){var e=d.default.invoke||WeixinJSBridge.invoke;e("selectEnterpriseContact",{fromDepartmentId:1,mode:"multi",type:["user"],selectedDepartmentIds:[],selectedUserIds:[]},function(e){if("selectEnterpriseContact:ok"==e.err_msg){"string"==typeof e.result&&(e.result=JSON.parse(e.result));for(var a=e.result.userList,i=0;i<a.length;i++){var n=function(t){var e=this;uni.request({url:"http://testapi.shiliucrm.com/v1/hwechat_callback/callbacktask/getuserid",data:{id:t},success:function(t){e.idList.push(t.data.user_id)}})},s=a[i];t.imgList=t.imgList.concat(s.avatar);var o=s.id;n(o)}}})})}})}},onLoad:function(){var t=uni.getStorageSync("login");t&&(this.accessToken=t.access_token,this.appsercert=t.appsercert)},onTabItemTap:function(){console.log("点击了添加项目页面"),uni.switchTab({url:"/pages/additem/index"})},onShow:function(){document.title="handone",(0,o.ChangePageTitle)("handone");var t=uni.getStorageSync("list");t&&(console.log(t),this.moulde_id=t.moulde_id,this.mould_name=t.moulde,uni.removeStorageSync("list"));var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();console.log(a,i,n),this.pickVal=[a-2e3,i-1,n-1]}};e.default=r},"4fb4":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"box"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-textarea",{attrs:{value:"",placeholder:"项目名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-uni-view",{staticClass:"lab",attrs:{for:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goAddMember.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"lab1"},[a("span",[a("span",[t._v("项目成员")])])]),a("v-uni-view",{staticClass:"lab2 select"},[a("v-uni-view",{staticClass:"sp"},t._l(t.imgList,function(t){return a("span",[a("v-uni-image",{attrs:{src:t,mode:""}})],1)}),0),a("span",{staticClass:"right"},[a("v-uni-image",{attrs:{src:"/static/images/222.png",mode:""}})],1)],1)],1),a("v-uni-view",{staticClass:"lab",attrs:{for:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeStarttime(1)}}},[a("v-uni-view",{staticClass:"lab1"},[a("span",[a("span",[t._v("设置开始时间")])])]),a("v-uni-view",{staticClass:"lab2 select"},[a("v-uni-input",{staticClass:"max_input ",attrs:{type:"text",disabled:!0,placeholder:""},model:{value:t.starttime,callback:function(e){t.starttime=e},expression:"starttime"}}),a("span",{staticClass:"right"},[a("v-uni-image",{attrs:{src:"/static/images/222.png",mode:""}})],1)],1)],1),a("v-uni-view",{staticClass:"lab",attrs:{for:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeEndtime(1)}}},[a("v-uni-view",{staticClass:"lab1"},[a("span",[a("span",[t._v("设置截止时间")])])]),a("v-uni-view",{staticClass:"lab2 select"},[a("v-uni-input",{staticClass:"max_input ",attrs:{type:"text",disabled:!0,placeholder:""},model:{value:t.endtime,callback:function(e){t.endtime=e},expression:"endtime"}}),a("span",{staticClass:"right"},[a("v-uni-image",{attrs:{src:"/static/images/222.png",mode:""}})],1)],1)],1),a("v-uni-view",{staticClass:"lab",attrs:{for:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gomouldlist.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"lab1"},[a("span",[a("span",[t._v("项目模板")])])]),a("v-uni-view",{staticClass:"lab2 select"},[a("v-uni-input",{staticClass:"max_input ",attrs:{type:"text",disabled:!0,placeholder:""},model:{value:t.mould_name,callback:function(e){t.mould_name=e},expression:"mould_name"}}),a("span",{staticClass:"right"},[a("v-uni-image",{attrs:{src:"/static/images/222.png",mode:""}})],1)],1)],1),a("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[a("a",[t._v("完成")])]),a("w-picker",{ref:"picker",attrs:{startYear:t.startYear,endYear:"2030",value:t.pickVal,step:"1",themeColor:"#f00"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm3.apply(void 0,arguments)}}}),a("w-picker",{ref:"picker2",attrs:{startYear:t.startYear,endYear:"2030",value:t.pickVal,step:"1",themeColor:"#f00"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)}}})],1)},s=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return i})},"76fe":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"*[data-v-d1bade32]{margin:0;padding:0}uni-page-body[data-v-d1bade32]{background:#f3f3f3}.content[data-v-d1bade32]{width:100%;\n\t/* height: 100upx; */padding:%?20?%;box-sizing:border-box;border-bottom:%?2?% solid #f3f3f3;background:#fff}.content uni-textarea[data-v-d1bade32]{width:100%;height:%?100?%;padding:%?20?%;box-sizing:border-box}.select[data-v-d1bade32]{width:100%;overflow:hidden}.select uni-view[data-v-d1bade32]{width:100%;float:left}.select .title[data-v-d1bade32]{width:100%;padding:%?10?% %?40?%;box-sizing:border-box;font-size:%?24?%;color:#b0b0b0}.man[data-v-d1bade32]{width:100%;overflow:hidden;padding:0 %?20?% 0 %?40?%;box-sizing:border-box;margin-top:%?20?%;border-bottom:%?2?% solid #f3f3f3;border-top:%?2?% solid #f3f3f3;height:%?100?%}.man .sp1[data-v-d1bade32]{width:80%;height:%?100?%;float:left;\n\t/* padding: 10upx 0; */box-sizing:border-box;font-size:%?28?%;line-height:%?100?%}.man .sp1 span[data-v-d1bade32]{width:%?60?%;height:%?60?%!important;border-radius:50%;margin-right:%?10?%}.man .sp1 uni-image[data-v-d1bade32]{width:%?60?%;height:%?60?%;border-radius:50%;margin-top:%?20?%}.man .sp2[data-v-d1bade32]{width:%?60?%;height:%?60?%;float:right;padding:%?4?% 0 0 0;margin-top:%?18?%}.man .sp2 uni-image[data-v-d1bade32]{width:100%;height:100%}.btn[data-v-d1bade32]{width:%?630?%;height:%?90?%;margin:%?60?% auto 0}.btn a[data-v-d1bade32]{display:block;width:100%;height:100%;border-radius:%?50?%;background:#0081ff;text-align:center;line-height:%?90?%;color:#fff;font-size:%?32?%}.lab[data-v-d1bade32]{width:100%;height:%?80?%;overflow:hidden;padding:0 0 0 %?20?%;box-sizing:border-box;border-bottom:%?2?% solid #f3f3f3;background:#fff}.lab1[data-v-d1bade32]{float:left;width:24%;height:%?80?%;text-align:left;font-size:%?28?%;line-height:%?80?%}.lab2[data-v-d1bade32]{float:right;width:75%;overflow:hidden}.select uni-input[data-v-d1bade32]{width:%?460?%;height:%?80?%;line-height:%?80?%;float:left;text-align:right;padding:%?12?% 0;box-sizing:border-box;color:#000}.select .right[data-v-d1bade32]{float:right;padding:%?20?%;box-sizing:border-box}.select .right uni-image[data-v-d1bade32]{width:%?40?%;height:%?40?%}.select .sp[data-v-d1bade32]{float:left!important;width:%?460?%;height:%?80?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:%?10?% 0;box-sizing:border-box;text-align:right}.select .sp span[data-v-d1bade32]{\n\t/* float: right; */\n\t/* height: 100%; */text-align:center;\n\t/* line-height: 60upx; */font-size:%?26?%;box-sizing:border-box\n\t/* margin-right: 10upx; */}.select .sp span uni-image[data-v-d1bade32]{width:%?40?%;height:%?40?%;border-radius:50%;margin:%?10?% %?4?% 0}.max_input[data-v-d1bade32]{font-size:%?28?%}body.?%PAGE?%[data-v-d1bade32]{background:#f3f3f3}",""])},d290:function(t,e,a){"use strict";a.r(e);var i=a("1aee"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},d3b8:function(t,e,a){var i=a("76fe");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("0919faa9",i,!0,{sourceMap:!1,shadowMode:!1})},dea2:function(t,e,a){"use strict";a.r(e);var i=a("4fb4"),n=a("d290");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("e378");var o,d=a("f0c5"),r=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,"d1bade32",null,!1,i["a"],o);e["default"]=r.exports},e378:function(t,e,a){"use strict";var i=a("d3b8"),n=a.n(i);n.a}}]);